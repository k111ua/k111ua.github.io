<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./lib/layui/layui.all.js" charset="utf-8"></script>
    <script src="./lib/jquery-3.4.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./lib/layui/css/layui.css">
    <!--此处必须在最后引用k1t-->
    <link rel="stylesheet" type="text/css" href="./style/main.css" />
    <title>siderNav</title>
    <script>
        $(document).ready(function () {
            $(".nav-title").click(function () {
                $(".nav-group").removeClass("expand");
                $(this).parent(".nav-group").addClass("expand");
                $(this).parent(".nav-group").children(".nav-list").children().addClass("expand");
            });
            $(".nav-link").click(function () {
                $(".nav-link").removeClass("current");
                $(this).addClass("current");
            });
        });
    </script>
</head>

<body>
        <div class="view" style="overflow-y: auto;position: absolute;top: 0;bottom: 73px;">
        <!--没有底部的按钮行则bottom:0-->
        <div class="content">
            <div style="height: 24px;"></div>
            <div class="steps-bar">
                <table>
                    <tr>
                        <td>
                            <div class="step-item current">
                                <div class="index">1</div>
                                <div class="title">领用单信息</div>
                            </div>
                        </td>
                        <td>
                            <div class="step-line"></div>
                        </td>
                        <td>
                            <div class="step-item">
                                <div class="index">2</div>
                                <div class="title">领用备件明细</div>
                            </div>
                        </td>
                        <td>
                            <div class="step-line"></div>
                        </td>
                        <td>
                            <div class="step-item">
                                <div class="index">3</div>
                                <div class="title">资料上传</div>
                            </div>
                        </td>
                        <td>
                            <div class="step-line"></div>
                        </td>
                        <td>
                            <div class="step-item">
                                <div class="index">3</div>
                                <div class="title">完结</div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="form-area">
                <form class="layui-form">
                    <table class="k1t-form info-form">
                        <tr>
                            <td class="label-td">
                                <div class="label required">必填项</div>
                                <!--必填项标识和句末冒号无需写入，由样式控制生成-->
                            </td>
                            <td class="info-td">
                                <input type="text" class="input">
                            </td>
                            <td class="hint-td">
                                <div class="hint">此项为必填项</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">范围</div>
                            </td>
                            <td class="info-td">
                                <input type="text" class="input range">
                                <div class="range-label"></div><input type="text" class="input range">
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">下拉列表</div>
                            </td>
                            <td class="info-td">
                                <div class="dropdown">
                                    <select>
                                        <option>1</option>
                                        <option>2</option>
                                    </select>
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">下拉列表组合</div>
                            </td>
                            <td class="info-td">
                                <div class="dropdown range">
                                    <select>
                                        <option>1</option>
                                        <option>2</option>
                                    </select>
                                </div>
                                <div class="range-label"></div>
                                <div class="dropdown range">
                                    <select>
                                        <option>1</option>
                                        <option>2</option>
                                    </select>
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label required">日期</div>
                            </td>
                            <td class="info-td">
                                <div class="datepicker">
                                    <input type="text" id="date" lay-verify="date" autocomplete="off"
                                        class="layui-input">
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">日期范围</div>
                            </td>
                            <td class="info-td">
                                <div class="datepicker range">
                                    <input type="text" id="date1" lay-verify="date" autocomplete="off"
                                        class="layui-input">
                                </div>
                                <div class="range-label"></div>
                                <div class="datepicker range">
                                    <input type="text" id="date2" lay-verify="date" autocomplete="off"
                                        class="layui-input">
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">checkbox-group</div>
                            </td>
                            <td class="info-td">
                                <div class="checkbox-group">
                                    <input type="checkbox" name="checkbox" title="选项1" lay-skin="primary">
                                    <input type="checkbox" name="checkbox" title="选项2" lay-skin="primary">
                                    <input type="checkbox" name="checkbox" title="选项3" lay-skin="primary">
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">radio-group</div>
                            </td>
                            <td class="info-td">
                                <div class="radio-group">
                                    <input type="radio" name="radio" value="选项1" title="选项1">
                                    <input type="radio" name="radio" value="选项2" title="选项2">
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">image-upload</div>
                            </td>
                            <td class="info-td">
                                <div class="upload-panel">
                                    <div id="imageUploader" class="upload-tile"></div>
                                </div>
                            </td>
                            <td class="hint-td"></td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">添加附件</div>
                            </td>
                            <td class="info-td">
                                <div class="upload-panel">
                                    <div class="action-bar">
                                        <div id="fileUploader" class="btn default icon">
                                            <div class="icon">&#xe7ef;</div>上传
                                        </div>
                                    </div>
                                    <div id="fileList" class="file-list"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-td">
                                <div class="label">textarea</div>
                            </td>
                            <td class="info-td">
                                <textarea class="textarea"></textarea>
                            </td>
                            <td class="hint-td"></td>
                        </tr>

                        <tr>
                            <td></td>
                            <!--空白单元格-->
                            <td class="submit-td">
                                <div style="height: 16px;"></div>
                                <div class="action-bar">
                                    <div class="btn primary">提交</div>
                                    <div class="btn default">取消</div>
                                </div>
                            </td>
                            <td></td>
                        </tr>
                    </table>
                </form>
            </div>
            <div style="height: 32px;"></div>
        </div>
        <div class="popup-submit-panel">
            <div class="btn primary">下一步</div>
            <div class="btn default">返回</div>
        </div>
    </div>

</body>
<script>
    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form,
            layer = layui.layer,
            layedit = layui.layedit,
            laydate = layui.laydate;
        laydate.render({
            elem: '#date'
        });
        laydate.render({
            elem: '#date1'
        });
        form.render();
    });
</script>
<script>
    layui.use('upload', function () {
        var $ = layui.jquery,
            upload = layui.upload;
        upload.render({
            elem: '#imageUploader',
            url: '/upload/',
            multiple: true,
            before: function (obj) {
                obj.preview(function (index, file, result) {
                    $('#imageUploader').before(
                        '<div class="image-tile"><div class="mask"><div class="icon-btn default">&#xe7ec;</div><div class="icon-btn alert">&#xe7c3;</div></div><img src="' +
                        result + '" alt="' + file.name +
                        '" class="image"></div>')
                });
            },
            done: function (res) {}
        });
        upload.render({
            elem: '#test3',
            url: '/upload/',
            accept: 'file' //普通文件
                ,
            done: function (res) {
                console.log(res)
            }
        });
        var fileListView = $('#fileList'),
            uploadListIns = upload.render({
                elem: '#fileUploader',
                url: '/upload/',
                accept: 'file',
                multiple: true,
                auto: false,
                bindAction: '#fileUploaderAction',
                choose: function (obj) {
                    var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                    //读取本地文件
                    obj.preview(function (index, file, result) {
                        var fileItem = $([
                            '<div class="file-item" id="upload-' + index + '">',
                            '<div class="file-name">',
                            '<div class="icon file">&#xe7e2;</div>' + file.name +
                            '</div>',
                            '<div class="action-bar right">',
                            '<div class="icon-btn min default download">&#xe7f0;</div>',
                            '<div class="icon-btn min alert del">&#xe7c3;</div>',
                            '</div>',
                            '</div>'
                        ].join(''));

                        //删除
                        fileItem.find('.del').on('click', function () {
                            delete files[index]; //删除对应的文件
                            fileItem.remove();
                            uploadListIns.config.elem.next()[0].value =
                                ''; //清空 input file 值，以免删除后出现同名文件不可选
                        });

                        fileListView.append(fileItem);
                    });
                }
            });
    });
</script>

</html>